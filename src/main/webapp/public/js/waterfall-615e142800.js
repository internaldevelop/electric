function waterFall(t){var a;function e(t,e,i){this.colsHeight=[],this.children=[],this.$par=t,this.perWidth=a.perWidth,this.init(i)}function r(t){var e,i,s=0,h=t[0];for(e=0,i=t.length;e<i;e++)h>t[e]&&(h=t[s=e]);return{index:s,value:h}}return a=$.extend({$par:null,perWidth:0,$children:null,space:0,rowSpace:10,minWidth:0},t),e.prototype.init=function(t){this.getPos(),this.append(t)},e.prototype.getPos=function(){var t,e,i,s,h,p,r,n;for(0!==a.perWidth?e=function(t,e){var i,s,h,p,r=1;s=parseInt((t+r)/(e+r),10),i=parseInt((t-r)/(e+r),10),p=s===i?(h=i,r=parseInt((t+r-(e+r)*h)/(h+1),10)+r,parseInt((t-(e*h+r*(h+1)))/2,10)):(h=s,r=parseInt((t+r-(e+r)*h)/(h-1),10)+r,parseInt((t-(e*h+r*(h-1)))/2,10));return 0!==h&&1!==h?{cols:h,space:r,left:p+r}:{cols:1,space:0,left:p=0===h?0:parseInt((t-e)/2,10)}}(this.$par.width(),a.perWidth):0!==a.space&&(i=this.$par.width(),s=a.space,h=a.minWidth,p=parseInt((i+s)/(h+s),10),r=parseInt((i+s-(h+s)*p)/p,10)+h,n=parseInt((i+s-(r+s)*p)/2,10),e=0!==p?{cols:p,perWidth:r,left:n}:{cols:1,perWidth:h,left:0}),this.space=e.space||a.space,this.perWidth=e.perWidth||a.perWidth,this.cols=e.cols,this.left=e.left,this.colsHeight=[],t=0;t<this.cols;t++)this.colsHeight[t]=0},e.prototype._append=function(t){var e,i,s,h,p=this;for(i=0,s=t.length;i<s;i++)this.$par.append(t[i]),e=t[i].innerHeight(),h=r(this.colsHeight),t[i].css({top:h.value+"px",left:p.left+(p.perWidth+p.space)*h.index+"px",width:p.perWidth+"px"}),this.colsHeight[h.index]+=e+a.rowSpace;return this.$par.css("height",Math.max.apply("",this.colsHeight)+"px"),this},e.prototype.append=function(t){var i=[],s=this;return t&&("array"===$.type(t)?(this.children=this.children.concat(t),this._append(t)):(t.each(function(t,e){s.children.push($(e)),i.push($(e))}),this._append(i))),this},e.prototype.fresh=function(){return this.getPos(),this._append(this.children),this},e.prototype.clear=function(){return this.getPos(),this.children=[],this.$par.empty().css("height",0),this},new e(a.$par,a.perWidth,a.$children)}